- ruleID: detect-ant
  category: mandatory
  effort: 1
  labels:
    - konveyor.io/source=ant
    - konveyor.io/source=build-tool
  when:
    builtin.xml:
      filepaths:
        - build.xml
      xpath: /project
  description: "Detects an Ant build (build.xml). Ant is not allowed."
  message: |
    Ant build detected (build.xml).
    This tool is no longer supported. Please migrate to Maven or Gradle.
  links: []

- ruleID: detect-maven
  category: informational
  effort: 1
  labels:
    - konveyor.io/source=maven
    - konveyor.io/source=build-tool
  when:
    builtin.xml:
      filepaths:
        - pom.xml
      namespaces:
        m: "http://maven.apache.org/POM/4.0.0"
      xpath: "//m:project"
  description: "Detects a Maven build (pom.xml)."
  message: |
    Maven build detected.
    Use additional rules for Maven-based dependency or version checks.
  links: []

- ruleID: detect-gradle
  category: informational
  effort: 1
  labels:
    - konveyor.io/source=gradle
    - konveyor.io/source=build-tool
  when:
    builtin.file:
      pattern: "(?:build\\.gradle|build\\.gradle\\.kts|settings\\.gradle|settings\\.gradle\\.kts|gradlew|gradle/wrapper/gradle-wrapper\\.properties)"
  description: "Detects if the repository is a Gradle project"
  message: |
    This repository appears to be a Gradle project. Gradle-related files were detected.
  links:
    - title: "Gradle Build Tool"
      url: "https://gradle.org/"

