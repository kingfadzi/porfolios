- ruleID: detect-java-version-gradle
  category: informational
  effort: 1
  labels:
    - konveyor.io/source=gradle
    - konveyor.io/source=java-version
  when:
    or:
      - builtin.filecontent:
          filePattern: "(build\\.gradle|settings\\.gradle)"
          pattern: "(?:sourceCompatibility|targetCompatibility)\\s*=\\s*['\"](?P<version>\\d+(?:\\.\\d+)*)(?:\\.\\d+)?['\"]"

      - builtin.filecontent:
          filePattern: "(build\\.gradle\\.kts|settings\\.gradle\\.kts)"
          pattern: "(?:sourceCompatibility|targetCompatibility)\\s*=\\s*JavaVersion\\.VERSION_(?P<version>\\d+)"

  description: "Detects the Java version used in a Gradle project."
  message: |
    Java version {{.matchedText}} detected in Gradle files.
    This info can be used for compatibility checks and migration planning.
